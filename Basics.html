<head>
	<title>Augmented reality Code Dump By Vatsal Patel</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onload="mastermind();">
	<div class="head" id="head">Augmented reality Code Dump By Vatsal Patel</div><br>
	<br>
	<div id="master">
<lable class="Title deleat count" vat-id="1">ID : 1 &amp; Title : Basic</lable><textarea class="txt deleat" vat-id="1">//Augmented Reality. Pok√©mon game jevu,.,...
// add overlayed content on the real world.
// Marker-Based AR -&gt; Image Recognition, provides us more information about the object after it focuses

//Marker-less AR -&gt; Location-based AR

//Projection AR -&gt; projection of light on a surface, interaction is done by touching

// Superimposition Based</textarea><lable class="Title deleat count" vat-id="2">ID : 2 &amp; Title : WebRTC Issue - Navigator.MediaDevice is not presented in your device.</lable><textarea class="txt deleat" vat-id="2">// Change the file protocol to https:// or something secure. This is because of the new updates from google chrome. I found this to work for me. Just basically adding https:// to the beginning of my link
</textarea><lable class="Title deleat count" vat-id="3">ID : 3 &amp; Title : .obj and .mtl relative paths,......</lable><textarea class="txt deleat" vat-id="3">//.mtl is linked in .obj file,..
//syntax,...
// mtllib e:\3d library\A-1.mtl

//mtl files containing definitions of materials that may be accessed by an OBJ file,

//mtl file also contain graphics,... so changes its path accordingly,..

//example,....

//map_Ka e:\3d library\DigestiveSystem_diffuse.jpg


so change path as per your assets location,...

</textarea><lable class="Title deleat count" vat-id="4">ID : 4 &amp; Title : When using AR.js on mobile the camera zooms too much</lable><textarea class="txt deleat" vat-id="4">    &lt;meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0,initial-scale=1, maximum-scale=1.0"
    /&gt;

 Google Chrome Mobile &gt; Settings &gt; Accessibility. Uncheck Force Enable Zoom and the Text Scaling is &lt;= 100%</textarea><lable class="Title deleat count" vat-id="5">ID : 5 &amp; Title : How to disable the device orientation permission dialog and the enter VR button</lable><textarea class="txt deleat" vat-id="5">&lt;a-scene 
   background="color: #FAFAFA" 
   device-orientation-permission-ui="enabled: false"
   vr-mode-ui="enabled: false"
   networked-scene="room: dev; debug: true; adapter: socketio;"&gt;
    ...
&lt;/a-scene&gt;</textarea><lable class="Title deleat count" vat-id="6">ID : 6 &amp; Title : Disabled Default Camera rotation and Wasd keyboard controls</lable><textarea class="txt deleat" vat-id="6"> &lt;a-camera look-controls-enabled="false" wasd-controls-enabled="false"&gt;&lt;/a-camera&gt;</textarea><lable class="Title deleat count" vat-id="7">ID : 7 &amp; Title : center And ScaleModel resize, Origin reset</lable><textarea class="txt deleat" vat-id="7">function centerAndScaleModel(modelEl) {
    var box;
    var size;
    var center;
    var scale;
    // var modelEl = model_iso;

    var gltfObject = modelEl.getObject3D('mesh');

    // Reset position and scales.
    modelEl.object3D.position.set(0, 0, 0);
    modelEl.object3D.scale.set(1.0, 1.0, 1.0);
    // this.cameraRigEl.object3D.position.z = 3.0;

    // Calculate model size.
    modelEl.object3D.updateMatrixWorld();
    box = new VATS.Box3().setFromObject(gltfObject);
    size = box.getSize(new VATS.Vector3());

    // Calculate scale factor to resize model to human scale.
    scale = 1.6 / size.y;
    scale = 2.0 / size.x &lt; scale ? 2.0 / size.x : scale;
    scale = 2.0 / size.z &lt; scale ? 2.0 / size.z : scale;

    modelEl.object3D.scale.set(scale, scale, scale);

    // Center model at (0, 0, 0).
    modelEl.object3D.updateMatrixWorld();
    box = new VATS.Box3().setFromObject(gltfObject);
    center = box.getCenter(new VATS.Vector3());
    size = box.getSize(new VATS.Vector3());



    modelEl.object3D.position.x = -center.x;
    modelEl.object3D.position.y = -center.y;
    modelEl.object3D.position.z = -center.z;

}</textarea><lable class="Title deleat count" vat-id="8">ID : 8 &amp; Title : remove 3d object mesh</lable><textarea class="txt deleat" vat-id="8">function RemoveMesh(object3D, MeshRemove) {
    if (!object3D) {
      return
    }
    object3D.traverse(obj =&gt; {
      if (obj.material) {
        obj.material.dispose();
        if (obj.material.map) {
          obj.material.map.dispose();
        }
        if (obj.material.lightMap) {
          obj.material.lightMap.dispose();
        }
        if (obj.material.aoMap) {
          obj.material.aoMap.dispose();
        }
        if (obj.material.emissiveMap) {
          obj.material.emissiveMap.dispose();
        }
        if (obj.material.bumpMap) {
          obj.material.bumpMap.dispose();
        }
        if (obj.material.normalMap) {
          obj.material.normalMap.dispose();
        }
        if (obj.material.displacementMap) {
          obj.material.displacementMap.dispose();
        }
        if (obj.material.roughnessMap) {
          obj.material.roughnessMap.dispose();
        }
        if (obj.material.metalnessMap) {
          obj.material.metalnessMap.dispose();
        }
        if (obj.material.alphaMap) {
          obj.material.alphaMap.dispose();
        }
      }
      if (obj.geometry) {
        obj.geometry.dispose();
      }
    });
    if (MeshRemove) {
      object3D.el.removeObject3D("mesh");
    }
  
  }</textarea><lable class="Title deleat count" vat-id="9">ID : 9 &amp; Title : Aframe Threejs remove texture Cache</lable><textarea class="txt deleat" vat-id="9">   &lt;a-scene  id="vat_scene"&gt;&lt;/a-scene&gt;
const textureCache = vat_scene.systems.material.textureCache;

    for (let key in textureCache) {
        textureCache[key].then(val =&gt; {
            // console.log()
            if (!val.texture) {
                val.dispose()
            }
        })
    }</textarea><lable class="Title deleat count" vat-id="10">ID : 10 &amp; Title : Aframe animation example</lable><textarea class="txt deleat" vat-id="10"> CameraRigEL().removeAttr("animation__t1");
    CameraRigEL().attr("animation__t1", `property: position;from:"0 0 3"; to: "0 0 0"; dur: 1000;easing: linear; autoplay: true`);

 animation="property: components.material.material.opacity; from: 0; to: 1;dur: 1000;easing: easeInQuad; autoplay: true"
           </textarea><lable class="Title deleat count" vat-id="11">ID : 11 &amp; Title : object3D get local center and world Center</lable><textarea class="txt deleat" vat-id="11">let Node_local = (e, o) =&gt; {
    /*e=parentObject, o=childNode */
    let t = (new VATS.Box3).setFromObject(o),
        l = t.getCenter(new VATS.Vector3);
    return e.object3D.worldToLocal(l.clone())
};
let Node_world = e =&gt; {
    /*e=nodeObject*/
    let t = (new VATS.Box3).setFromObject(e);
    return t.getCenter(new VATS.Vector3)
};</textarea><lable class="Title deleat count" vat-id="12">ID : 12 &amp; Title : Aframe entity Change Text</lable><textarea class="txt deleat" vat-id="12">let Chng_Txt = (node, Txt) =&gt; {
    let text_obj = $(node).attr("text");
    text_obj.value = Txt;
    $(node).attr("text", text_obj);
}</textarea><lable class="Title deleat count" vat-id="13">ID : 13 &amp; Title : start and Stop Raycaster</lable><textarea class="txt deleat" vat-id="13">function startStopRaycast(isStart) {
    $('[raycaster]').each((e, el) =&gt; {
        if (!el.components) {
            setTimeout(() =&gt; {
                startStopRaycast(isStart);
            }, 1000);
        }
        else if (!el.components["raycaster"]) {
            setTimeout(() =&gt; {
                startStopRaycast(isStart);
            }, 1000);
        }
        else {
            el.components["raycaster"].data.enabled = isStart
        }
    })
}</textarea><lable class="Title deleat count" vat-id="14">ID : 14 &amp; Title : reflection problem with shadow stripes on model</lable><textarea class="txt deleat" vat-id="14">  // shadow glitch done,....
        model.object3D.traverse((child) =&gt; {
            if (!child.isMesh) return;
            child.material.shadowSide = VATS.BackSide;
            child.material.needsUpdate = true;
        })</textarea><lable class="Title deleat count" vat-id="15">ID : 15 &amp; Title : Add fake environment on model object3D</lable><textarea class="txt deleat" vat-id="15">function Add_envMap_1(gltf) {
    let _reflection_map = new VATS.TextureLoader().load("./Assets/images/home.jpg");
    _reflection_map.encoding = VATS.sRGBEncoding;
    _reflection_map.mapping = VATS.EquirectangularReflectionMapping;
    gltf.traverse((child) =&gt; {
        if (child.material) {
            child.material.envMap = _reflection_map;
            child.material.envMap.intensity = 5;
            child.material.needsUpdate = true;
        }
    });
}



function Add_envMap_2(gltf) {
    gltf.traverse((child) =&gt; {
        const textureCube = generateCubeMap();
        if (child.material) {
            child.material.envMap = textureCube;
            child.material.envMap.intensity = 0.5;
            child.material.needsUpdate = true;
        }
    });
}


function generateCubeMap() {
    let images = [];
    let c = document.createElement("canvas");
    c.width = 4;
    c.height = c.width;
    let ctx = c.getContext("2d");
    for (let i = 0; i &lt; 6; i++) {
        ctx.fillStyle = "#fff";
        ctx.fillRect(0, 0, c.width, c.height);

        for (let j = 0; j &lt; (c.width * c.height) / 2; j++) {
            // ctx.fillStyle = Math.random() &lt; 0.5 ? "#d5d5d5" : "#ececec";
            ctx.fillStyle = "#fff";
            // ctx.fillStyle ="#ff0000";
            ctx.fillRect(
                Math.floor(Math.random() * c.width),
                Math.floor(Math.random() * c.height),
                2,
                1
            );
        }
        images.push(c.toDataURL());
    }
    let cm = new VATS.CubeTextureLoader().load(images);
    return cm;
}</textarea><lable class="Title deleat count" vat-id="16">ID : 16 &amp; Title : Aframe animation-mixer Helpher Functions </lable><textarea class="txt deleat" vat-id="16">VFRAME = {};
// model object3D
// All time (in seconds)
//VFRAME.stopAnimation()
//VFRAME.startAnimation()
// VFRAME.playAnimation()
// VFRAME.mixerTime(3) start animation at 3seconds

// need to convert frame to seconds

VFRAME.startAnimation = function (timeout) {
  if (timeout) {
    setTimeout(() =&gt; {
      model.setAttribute(
        "animation-mixer",
        "clip: *; loop: once; clampWhenFinished: true;timeScale:0"
      );
    }, timeout * 1000);
  } else {
    model.setAttribute(
      "animation-mixer",
      "clip: *; loop: once; clampWhenFinished: true;timeScale:0"
    );
  }
}

VFRAME.mixerTime = function (time) {
  let mixerComponent = model.components["animation-mixer"];
  let timeScale = model.components["animation-mixer"].data.timeScale;
  //   // 1  6  6
  // // 0.5 6 3

  let new_time = time / timeScale;
  let mixer = mixerComponent.mixer;
  // mixer.setTime(time);
  mixer.setTime(new_time);
}
VFRAME.playAnimation = function (Speed, timeout) {
  if (!Speed) {
    Speed = 1
  }
  if (timeout) {
    setTimeout(() =&gt; {
      model.setAttribute(
        "animation-mixer", `timeScale:${Speed}`
      );
    }, timeout * 1000);
  } else {
    model.setAttribute(
      "animation-mixer", `timeScale:${Speed}`
    );
  }

}
VFRAME.pauseAnimation = function (timeout) {
  let mixerComponent = model.components["animation-mixer"];
  let timeScale = model.components["animation-mixer"].data.timeScale;
  let new_timeout = (timeout / timeScale);
  if (timeout) {
    setTimeout(() =&gt; {
      model.setAttribute(
        "animation-mixer", "timeScale:0"
      );
    }, new_timeout * 1000);
    // }, timeout * 1000);
  } else {
    model.setAttribute(
      "animation-mixer", "timeScale:0"
    );
  }
}
VFRAME.stopAnimation = function (timeout) {
  if (timeout) {
    setTimeout(() =&gt; {
      model.removeAttribute("animation-mixer");
    }, timeout * 1000);
  } else {
    model.removeAttribute("animation-mixer");
  }
}</textarea><lable class="Title deleat count" vat-id="17">ID : 17 &amp; Title : copy Orignal matrial for latter use</lable><textarea class="txt deleat" vat-id="17">function copyOrignal(object3D) {
    object3D.traverse((node) =&gt; {
      if (!node.isMesh) return;
  
      node.userData.originalMaterial = node.material.clone();
      node.userData.originalPosition = node.position.clone();
      node.userData.originalScale = node.scale.clone();
    })
  }</textarea><lable class="Title deleat count" vat-id="18">ID : 18 &amp; Title :  hide show model childs with animations ,using child name arr</lable><textarea class="txt deleat" vat-id="18">VFRAME = {}
VFRAME.ANIME = {};
VFRAME.ANIME.ShowNodeAnime = (node_arr) =&gt; {
  if (!node_arr) {
    model.object3D.traverse(node =&gt; {
      VFRAME.ANIME.showIt(node);
    })
  } else {
    for (let i = 0; i &lt; node_arr.length; i++) {
      let node = model.object3D.getObjectByName(node_arr[i]);
      VFRAME.ANIME.showIt(node)
    }
  }
}

VFRAME.ANIME.HideNodeAnime = (node_arr) =&gt; {
  if (!node_arr) {
    model.object3D.traverse(node =&gt; {
      VFRAME.ANIME.hideIt(node)
    })
  } else {
    for (let i = 0; i &lt; node_arr.length; i++) {
      let node = model.object3D.getObjectByName(node_arr[i]);
      VFRAME.ANIME.hideIt(node)
    }
  }
}

VFRAME.ANIME.IntHideNodeAnime = (node_arr) =&gt; {
  if (!node_arr) {
    model.object3D.traverse(node =&gt; {
      node.material.opacity = 0;
      node.visible = false;
      node.material.needsUpdate = true;
    })
  } else {
    for (let i = 0; i &lt; node_arr.length; i++) {
      let node = model.object3D.getObjectByName(node_arr[i]);
      node.material.opacity = 0;
      node.visible = false;
      node.material.needsUpdate = true;
    }
  }
}

VFRAME.ANIME.HideAllExcpt = (node_arr) =&gt; {
  model.object3D.traverse(node =&gt; {
    if (node_arr.indexOf(node.name) &lt; 0) {
      VFRAME.ANIME.hideIt(node)
    }
  })
}

VFRAME.ANIME.ShowAllExcpt = (node_arr) =&gt; {
  model.object3D.traverse(node =&gt; {
    if (node_arr.indexOf(node.name) &lt; 0) {
      VFRAME.ANIME.showIt(node)
    }
  })
}

VFRAME.ANIME.showIt = function (node) {
  if (!node) {
    return
  }

  if (node.material) {
    node.visible = true;
    let transparent = false;
    let opacity = 1;
    if (node.userData) {
      if (node.userData.originalMaterial) {
        transparent = node.userData.originalMaterial.transparent;
        opacity = node.userData.originalMaterial.opacity;
      }
    }

    node.material.opacity = 0;
    node.material.transparent = transparent;
    node.material.needsUpdate = true;
    let temp_opac = 0;

    let interval = setInterval(() =&gt; {
      temp_opac += 0.1
      node.material.opacity = temp_opac;
      if (temp_opac &gt;= opacity) {
        node.material.opacity = opacity;
        node.visible = true;
        node.material.needsUpdate = true;
        clearInterval(interval);
      }
      node.material.needsUpdate = true;
    }, 50);
    node.material.needsUpdate = true;
  }
}

VFRAME.ANIME.hideIt = function (node) {
  if (node.material) {
    let temp_opac = node.material.opacity || 1;
    node.material.opacity = 0;
    node.material.transparent = true;
    node.material.needsUpdate = true;
    let interval = setInterval(() =&gt; {
      temp_opac -= 0.1
      node.material.opacity = temp_opac;
      if (temp_opac &lt;= 0) {
        node.material.opacity = 0;
        node.visible = false;
        node.material.needsUpdate = true;
        clearInterval(interval);
      }
      node.material.needsUpdate = true;
    }, 50);
    node.material.needsUpdate = true;
  }
}</textarea><lable class="Title deleat count" vat-id="19">ID : 19 &amp; Title : model Child (part) highlighter with glass material</lable><textarea class="txt deleat" vat-id="19">function partLocate(model, node_name) { //node_name gltf id of child
    const texture = new VATS.CanvasTexture(generateTexture());
    texture.magFilter = VATS.NearestFilter;
    texture.wrapT = VATS.RepeatWrapping;
    texture.wrapS = VATS.RepeatWrapping;

    model.object3D.traverse((child) =&gt; {
        if (!child.isMesh) return;

        // if (child.name == this.data.value || child.name==`${this.data.value}0` || child.name == `${this.data.value}1` || child.name == `${this.data.value}2`) {
        if (child.name == node_name || child.parent.name == node_name) {
            if (child.userData) {

                // if (!child.parent.isMesh) return;
                child.material = child.userData.originalMaterial;
                child.position.copy(child.userData.originalPosition);
                child.scale.copy(child.userData.originalScale);
                child.material.needsUpdate = true;
            }
        } else {
            child.material = new VATS.MeshPhysicalMaterial({
                color: "#ffffff",
                transmission: 1,
                opacity: 0.3,
                metalness: 1,
                roughness: 0.4,
                ior: 1.3,
                specularIntensity: 1,
                specularColor: "#ffffff",
                transparent: true,
                alphaMap: texture,
            });
            //   child.material = new VATS.MeshPhysicalMaterial({
            //     transparent: true,
            //     opacity: 0.2,
            // });
        }
    })
}
function generateTexture() {

    const canvas = document.createElement('canvas');
    canvas.width = 2;
    canvas.height = 2;

    const context = canvas.getContext('2d');
    context.fillStyle = 'white';
    context.fillRect(0, 0, 2, 2);

    return canvas;

}</textarea><lable class="Title deleat count" vat-id="20">ID : 20 &amp; Title : debug model Child Name (gltf id)</lable><textarea class="txt deleat" vat-id="20">function vat_debug_Name(model) {
    model.object3D.traverse((node) =&gt; {
        console.log(node.name)
    })
}</textarea></div><br>
	<br>
	<textarea class="sub subover" id="code0" placeholder="ID"></textarea> 
	<textarea class="sub subover" id="code1" placeholder="Title"></textarea> <br>
	<textarea class="sub subover" id="code2" placeholder="code"></textarea><br>
	<a href="javascript:runner()" id="btn">Submit</a> <a href="javascript:deleat()" id="btn">Delete</a> <a href="javascript:down()" id="btn">Download</a> 
	<textarea class="sub subover subover1" id="code3">Number of ID : 20</textarea> 
	<br>
	<script type="text/javascript" src="main.js"></script></body>